<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Management</title>
<style>
    body { font-family: 'Arial', sans-serif; background: #f9f9f9; padding: 20px; }
    h2 { text-align: center; color: #333; }
    .form-container { max-width: 600px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .form-container input, .form-container button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
    .form-container button { background: #007bff; color: #fff; border: none; cursor: pointer; }
    .form-container button:hover { background: #0056b3; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background-color: #007bff; color: white; }
    td button { padding: 5px 10px; margin-right: 5px; border: none; border-radius: 5px; cursor: pointer; }
    td button.edit { background: #ffc107; color: #fff; }
    td button.delete { background: #dc3545; color: #fff; }
    @media (max-width: 768px) {
        .form-container, table { width: 95%; }
        th, td { font-size: 14px; padding: 8px; }
    }
</style>
</head>
<body>

<h2>Employee Management System</h2>

<div class="form-container">
    <input type="hidden" id="employeeId">
    <input type="text" id="name" placeholder="Name">
    <input type="email" id="email" placeholder="Email">
    <input type="text" id="department" placeholder="Department">
    <input type="number" id="salary" placeholder="Salary">
    <button onclick="saveEmployee()">Save Employee</button>
    <button onclick="clearForm()" style="background:#6c757d;">Clear</button>
</div>

<div style="overflow-x:auto; max-width: 95%; margin:auto;">
<table id="employeeTable">
    <thead>
        <tr>
            <th>ID</th><th>Name</th><th>Email</th><th>Department</th><th>Salary</th><th>Actions</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
</div>

<script>
const API_URL = "http://localhost:8080/api/employees";

// Fetch all employees
function fetchEmployees() {
    fetch(API_URL)
        .then(res => res.json())
        .then(data => {
            const tbody = document.querySelector("#employeeTable tbody");
            tbody.innerHTML = "";
            data.forEach(emp => {
                tbody.innerHTML += `
                <tr>
                    <td>${emp.id}</td>
                    <td>${emp.name}</td>
                    <td>${emp.email}</td>
                    <td>${emp.department}</td>
                    <td>${emp.salary}</td>
                    <td>
                        <button class="edit" onclick="editEmployee(${emp.id})">Edit</button>
                        <button class="delete" onclick="deleteEmployee(${emp.id})">Delete</button>
                    </td>
                </tr>`;
            });
        });
}

// Save or Update employee
function saveEmployee() {
    const id = document.getElementById("employeeId").value;
    const employee = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        department: document.getElementById("department").value,
        salary: parseFloat(document.getElementById("salary").value)
    };

    if(!employee.name || !employee.email || !employee.department || !employee.salary){
        alert("Please fill all fields!");
        return;
    }

    if(id) {
        fetch(`${API_URL}/${id}`, {
            method: "PUT",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(employee)
        }).then(() => { clearForm(); fetchEmployees(); });
    } else {
        fetch(API_URL, {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(employee)
        }).then(() => { clearForm(); fetchEmployees(); });
    }
}

// Edit employee
function editEmployee(id) {
    fetch(`${API_URL}/${id}`)
        .then(res => res.json())
        .then(emp => {
            document.getElementById("employeeId").value = emp.id;
            document.getElementById("name").value = emp.name;
            document.getElementById("email").value = emp.email;
            document.getElementById("department").value = emp.department;
            document.getElementById("salary").value = emp.salary;
        });
}

// Delete employee
function deleteEmployee(id) {
    if(confirm("Are you sure you want to delete this employee?")) {
        fetch(`${API_URL}/${id}`, {method: "DELETE"})
            .then(() => fetchEmployees());
    }
}

// Clear form
function clearForm() {
    document.getElementById("employeeId").value = "";
    document.getElementById("name").value = "";
    document.getElementById("email").value = "";
    document.getElementById("department").value = "";
    document.getElementById("salary").value = "";
}

// Initial fetch
fetchEmployees();
</script>

</body>
</html>
